# Трекер задач сотрудников

### Настройка проекта:
```
pip install django==4.2 python-dotenv psycopg2
django-admin startproject config .
python manage.py startapp habits
python manage.py startapp users
pip install djangorestframework djangorestframework-simplejwt django-filter
pip install pillow
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
pip install black
pip install drf-yasg coverage flake8
```

### Запуск тестов:
```
coverage run --source='.' manage.py test
coverage report
```
### Запуск проверки flake8:
```
flake8 config/
flake8 tasks/
```
### Создание фикстур
```
python -Xutf8 manage.py dumpdata tasks > fixtures/tasks_data.json --indent=4
```
### Запуск Docker 
```
docker-compose build
docker-compose up
docker-compose down
```

### Описание задачи:

Необходимо реализовать серверное приложение для работы с базой данных, представляющее собой трекер задач сотрудников. Приложение должно обеспечивать CRUD операции для сотрудников и задач, а также предоставлять два специальных эндпоинта для получения информации о загруженности сотрудников и важных задачах.

Трекер задач позволит компании эффективно управлять заданиями, назначенными сотрудникам, и обеспечивать прозрачность процессов выполнения задач. Это поможет в равномерном распределении нагрузки между сотрудниками и своевременном выполнении ключевых задач.

### Задача:

**Требования к базе данных:**

1. **БД реляционная:** 
   - Использовать PostgreSQL.
2. **Структура базы данных:** 
   - Таблица сотрудников: 
     - ФИО
     - Должность
     - Дополнительные поля (по необходимости)
   - Таблица задач: 
     - Наименование
     - Ссылка на родительскую задачу (если есть зависимость)
     - Исполнитель
     - Срок
     - Статус
     - Дополнительные поля (по необходимости)
     
**Функциональность:**

1. **CRUD для сотрудников и задач:** 
   - Реализовать стандартные операции создания, чтения, обновления и удаления записей для таблиц сотрудников и задач.
2. **Специальные эндпоинты:** 
   - **Занятые сотрудники:** 
     - Запрашивает из БД список сотрудников и их задачи, отсортированный по количеству активных задач.
   - **Важные задачи:** 
     1. Запрашивает из БД задачи, которые не взяты в работу, но от которых зависят другие задачи, взятые в работу.
     2. Реализует поиск по сотрудникам, которые могут взять такие задачи (наименее загруженный сотрудник или сотрудник, выполняющий родительскую задачу, если ему назначено максимум на 2 задачи больше, чем у наименее загруженного сотрудника).
     3. Возвращает список объектов в формате: `{Важная задача, Срок, [ФИО сотрудника]}`.

 **Технические требования:**

 1. **Язык программирования:** 
    - Python 3.11
 2. **Фреймворк:** 
    - Django для реализации REST API с использованием Django REST Framework (DRF)
 3. **База данных:** 
    - PostgreSQL для хранения данных
 4. **ORM:** 
    - Django ORM для взаимодействия с базой данных
 5. **Контейнеризация:** 
    - Docker для контейнеризации приложения
 6. **Валидация данных:** 
    - Реализовать валидацию данных входящих запросов.
 7. **Документация:** 
    - В корне проекта должен быть файл README.md с описанием структуры проекта, инструкциями по установке и запуску, а также описанием API.
 8. **Качество кода:** 
    - Соблюдать стандарты PEP8 для Python кода.
    - Весь код должен храниться в удаленном Git репозитории.
 9. **Тестирование:** 
    - Написать тесты для всех основных функций платформы.
    - Покрытие тестами должно быть минимум 75% (Покрытие тестами - 82%).
10. **Автодокументация:** 
    - Реализовать автогенерируемую документацию API с использованием Swagger или ReDoc.


## Docker

### Для настроки

Скачать  Docker с сайта https://docs.docker.com/

Необходимо выйти из аккаунта для корректной работы (Для выхода выполните команду docker logout в терминале или нажмите на кнопку Sign out в Docker Desktop).

На Windows:
- В Docker Desktop перейдите в настройки
- выберите раздел Docker Engine
- Добавьте в поле настроек JSON с такими данными:
```
"registry-mirrors": [
  "https://mirror.gcr.io", 
  "https://daocloud.io", 
  "https://c.163.com/", 
  "https://registry.docker-cn.com"
]
```
- Нажмите на кнопку Apply & restart и дождитесь, когда Docker перезагрузится.

### Для запуска
- Созданы файлы docker-compose.yml и Dockerfile
- Соберите образ с помощью команды: `docker-compose build`
- Запустите контейнеры с помощью команды: `docker-compose up`
- Для остановки и удаления контейнеров используйте Ctrl + C в терминале, где запущен 
docker-compose up
- Для остановки контейнеров и удаления созданных ресурсов выполните команду: `docker-compose down`
